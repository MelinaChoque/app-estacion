<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Morphyx - Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="../views/static/css/styles.css">
	
</head>
<body>

		<header class="header-detalle">
			<h1>Estacion {{CHIPID}}</h1>
		</header>
		<main class="main-detalle">
			<div id="content">
			 	<template id="tpl__card">
			 		<div class="stream__row__card letra-blanca">
			 			<div class="stream__row__container">
								<div class="apodo">
				 					apodo
				 				</div>
				 				<i class="fa-solid fa-person icon-absolute-person"></i>
				 				<div class="ubicacion">
				 					ubicacion
				 				</div>
				 			<div class="chipid"></div>
			 				</div>
			 				
			 		</div>
			 	</template>
			 	<div id="stream__listado">
			 		</div>
			 </div>
		</main>
		<footer class="footer-landing letra-blanca">
			<p class="p-15">Autor Choque Melina.</p>
		</footer>

	<script type="text/javascript">
		
		loadEstacion().then( data => {
	 		data.forEach( row  => {
	 			if({{CHIPID}}==row.chipid)
	 				addEstacion(row);	
	 		});
	 	})

	 	function addEstacion(data){
	 		
	 		const tpl = tpl__card.content;
	 		/*< clona la plantilla como un nodo completo*/
	 		const clon = tpl.cloneNode(true);

	 		/*< alteramos el contenido del clon con los valores de data */
	 		clon.querySelector(".apodo").textContent = data.apodo;
	 		clon.querySelector(".ubicacion").textContent = data.ubicacion;

			stream__listado.appendChild(clon);
	 	}

		async function loadEstacion(){
		 	const response = await fetch("https://mattprofe.com.ar/proyectos/app-estacion/datos.php?mode=list-stations");
		 		const data = await response.json();
		 		return data;
		 		console.log(response)
		 	}


	</script>

</body>
</html>